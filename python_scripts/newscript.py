import matplotlib.pyplot as plt
import numpy as np

# Вхідні дані (можуть бути зчитані з файлу)
data = """
KR Karp-Rabin bndmq2 Boyer-Moore BXS Backward-OM skip Hash3 FS SSM SBNDM BSDM
4 260.180000 521.700000 0.020000 217.550000 178.320000 461.090000 217.670000 513.170000 186.420000 180.370000 140.720000 184.710000
8 232.460000 502.370000 188.690000 123.200000 127.780000 307.050000 142.640000 156.580000 102.350000 92.540000 68.010000 137.890000
16 240.410000 490.380000 55.560000 77.010000 78.580000 240.240000 100.850000 73.730000 68.650000 52.290000 40.470000 121.640000
32 243.890000 460.020000 22.540000 47.670000 36.030000 165.250000 76.090000 35.060000 43.610000 36.150000 26.790000 104.280000
64 255.390000 509.460000 24.750000 36.140000 27.360000 111.890000 67.430000 20.070000 36.480000 24.430000 35.320000 98.810000
128 228.240000 445.420000 21.690000 28.550000 18.360000 67.730000 44.690000 11.570000 26.900000 19.230000 36.020000 79.520000
256 229.300000 454.820000 20.840000 20.370000 13.070000 45.680000 40.010000 8.130000 19.760000 15.500000 34.300000 73.690000
512 238.630000 465.500000 23.890000 18.640000 9.770000 33.660000 44.320000 7.850000 18.600000 14.250000 36.470000 69.220000
1024 233.530000 465.800000 21.740000 14.500000 7.500000 27.480000 46.140000 5.920000 15.020000 11.070000 33.490000 63.330000
2048 225.430000 448.870000 20.950000 13.890000 6.950000 29.590000 53.340000 5.730000 13.800000 10.550000 34.020000 63.240000
4096 223.910000 450.350000 21.190000 13.950000 7.950000 43.150000 67.730000 6.710000 14.320000 12.250000 34.890000 63.000000
"""

# Розпарсимо дані
lines = data.strip().split('\n')
algorithms = lines[0].split()
results = [list(map(float, line.split())) for line in lines[1:]]

ms = [row[0] for row in results]
alg_data = {alg: [row[i+1] for row in results] for i, alg in enumerate(algorithms)}

# Побудова графіка
plt.figure(figsize=(14, 8))

colors = plt.cm.tab20(np.linspace(0, 1, len(algorithms)))

for i, alg in enumerate(algorithms):
    plt.plot(ms, alg_data[alg], label=alg, color=colors[i])

plt.xlabel('Length of test string (m)')
plt.ylabel('Time (ms)')
plt.title('Performance of Various Algorithms')
plt.legend()
plt.grid(True)
plt.xscale('log')
plt.yscale('log')

# Збережемо графік у файл
plt.savefig('algorithm_performance.png')
plt.show()